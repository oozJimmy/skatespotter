<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Skate Spotter</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>

    <!--Bootstrap CSS link compiled from scss/custom.scss-->
    <link href="./src/bootstrap.css" rel="stylesheet"  crossorigin="anonymous">
    <!--Bootstrap icons-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <!--Local styles-->
    <link rel="stylesheet" type="text/css" href="src/style.css" />
  </head>
  
  <body data-bs-theme="dark">

    <!--Header container-->
    <div class="container-fluid border-bottom border-primary" id="my-container">

      <div class="row my-custom-row justify-content-center align-items-center">
        <div class="col-sm-4">
          <h1>SkateSpotter</h1>
        </div>

        <div class="col-sm-4">
          <h3 class="p-3 text-primary">Find skate spots near you!</h3>
        </div>

        <div id="login-cell" class="col-sm-2">
          <button  id="outer-login" type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#login-modal">Login</button>
        </div>
        
        <div id="welcome" class="col-sm-2" style="display:none"></div>

        <div id="signup-cell" class="col-sm-2">
          <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#signup-modal">Signup</button>
        </div>

        <div id="logout-cell" class="col-sm-2" style="display:none">
          <button id="logout"type="button" class="btn btn-primary" >Logout</button>
        </div>
        
      </div>

      <!-- Login Modal :
        Add to login by leaving modal html and removing and replacing the button/visibility of button-->
      <div class="modal fade" id="login-modal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="loginModalLabel">Log In</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body">
              <div id="user" class="col-sm-6">
                <span class="text-danger" id="login-message"></span>
                <h5>Login</h5>
                <label for="usr">Username:</label>
                <input class="form-control form-control-sm" type="text" id="usr" name="usr">
                <label for="pwd">Password:</label>
                <input class="form-control form-control-sm" type="password" id="pwd" name="pwd">
              </div>
            </div>

            <div class="modal-footer">
              <button type="button" class="btn btn-outline-primary" data-bs-dismiss="modal">Close</button>
              <button class="btn btn-primary" type="submit" id="login-submit">Login</button>
            </div>
          </div>
        </div>
      </div> 
      
      
      <!-- Signup Modal -->
      <div class="modal fade" id="signup-modal" tabindex="-1" aria-labelledby="signupModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="signupModalLabel">Signup</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div id="newuser" class="col-sm-6">
                <span class="text-danger" id="signup-message"></span>
                <h5>Signup</h5>
                <label for="newusr">Username:</label>
                <input class="form-control form-control-sm" type="text" id="newusr" name="newusr">
                <label for="newpwd">Password:</label>
                <input class="form-control form-control-sm" type="password" id="newpwd" name="newpwd">
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-outline-primary" data-bs-dismiss="modal">Close</button>
              <button class="btn btn-primary" type="submit" id="signup-submit">Signup</button>
            </div>
          </div>
        </div>
      </div>

    

    </div> <!--End Header container-->

    <!--Light/dark theme button-->
    <button type="button" class="btn btn-primary" onclick="changeTheme()"><span class="bi-brightness-high"></span>Change site theme</button>

    <!--End Light/dark theme button-->

    <!--SPOT SUBMISSION-->
    <!-- Modal -->
    <div class="modal  fade" id="spot-submit-modal" tabindex="-1" aria-labelledby="spot-submit-label" aria-hidden="true" style="width:100%; height:100%;">
      <div class="modal-dialog modal-lg" style="width:100%; height:100%;">
        <div class="modal-content" style="width:100%; height:100%;">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="spot-submit-label">Input Spot Details</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div id="spot-modal-body" class="modal-body">
            <div class="form-group">
              <div class="row" style="height:15%;width:100%;">
                <div class="col-sm-6">
                  <label for="spot-name">Spot Name:</label><br>
                  <input type="text" class="form-control" id="spot-name" placeholder="Add a name for your spot" value ="Railbridge TESTER"><br>
                </div>
                <div class="col-sm-6">
                  <label for="category-select">Type of Spot:</label>
                  <select id= "category-select" class="form-select" aria-label="Category Select">
                    <option selected>Select a Category</option>
                    <option value="1">Stair</option>
                    <option value="2">Handrail</option>
                    <option value="3">Curb</option>
                    <option value="4">Pad</option>
                    <option value="5">Bank</option>
                    <option value="6">Ledge/Blocks</option>
                    <option value="7">Other</option>
                  </select>
                </div>
              </div>
              <div class="row" style="height:20%;width:100%;">
                <div class="col-sm-12">
                  <label for="spot-description">Description:</label><br>
                  <textarea class="form-control" rows="3" id="spot-description" placeholder="Description" value="TESTING SPOT SUBMISSION REMOVE ALL ENTRIES"></textarea>
                </div>  
              </div>
            </div>

            <div class="row" style="height:65%;width:100%;">
              <label class="">Drag marker to your spot location:</label>
              <div class="form-control" id="submit-spot-map"></div>
            </div>

          </div>
          <div class="modal-footer">
            <span class="text-danger" id="submit-message"></span>
            <button type="button" class="btn btn-outline-primary" data-bs-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary" id="spot-submit">Submit Spot</button>
          </div>
        </div>
      </div>
    </div>

    <div class="text-center" id="add-spot" style="display: none;">
      <h5 id="add-spot-header">Add a skate spot to the map!
        <button id="outer-add-spot-button" type="button" class="btn btn-primary m-3" data-bs-toggle="modal" data-bs-target="#spot-submit-modal">
          Add a spot!
        </button>
      </h5>
      
    </div>
    <!--END SPOT SUBMISSION-->

    <!--The header element for spot map -->
    <div class="container p-3 bg-secondary border border-primary" style="height:90%;width:100%">
      <h4 class="text-light">World Spot Map</h4>
      <div class="container p-3" id="map"></div>
      
    </div>

    <!--The div element for spot map -->

    <!--List of spots-->
    <div class="container p-3 bg-secondary  border border-primary">

      <h5>Sort List by Category</h5>
      <div class="row">
        <div class="col-sm-11">
          <select id='category-sort' class="form-select" aria-label="Default select example">
            <option selected>All</option>
            <option value="1">Stair</option>
            <option value="2">Handrail</option>
            <option value="3">Curb</option>
            <option value="4">Pad</option>
            <option value="5">Bank</option>
            <option value="6">Ledge/Blocks</option>
            <option value="7">Other</option>
          </select>
        </div>
        
        <div class="col-sm-1">
          <button class="btn btn-outline-primary" id="sort-reset">Reset</button>
        </div>
      </div>
      
      <div class="accordion" id="spotlist"></div>
    </div>
    
    <!--//////////// START SCRIPTS ////////////-->

    <!-- Maps Javascript API  -->
    <script>(g=>{var h,a,k,p="The Google Maps JavaScript API",c="google",l="importLibrary",q="__ib__",m=document,b=window;b=b[c]||(b[c]={});var d=b.maps||(b.maps={}),r=new Set,e=new URLSearchParams,u=()=>h||(h=new Promise(async(f,n)=>{await (a=m.createElement("script"));e.set("libraries",[...r]+"");for(k in g)e.set(k.replace(/[A-Z]/g,t=>"_"+t[0].toLowerCase()),g[k]);e.set("callback",c+".maps."+q);a.src=`https://maps.${c}apis.com/maps/api/js?`+e;d[q]=f;a.onerror=()=>h=n(Error(p+" could not load."));a.nonce=m.querySelector("script[nonce]")?.nonce||"";m.head.append(a)}));d[l]?console.warn(p+" only loads once. Ignoring:",g):d[l]=(f,...n)=>r.add(f)&&u().then(()=>d[l](f,...n))})
        ({key: "AIzaSyBqtNXGuEAlyRTH8Yti4YOHq7_FyYGRLf0", v: "weekly"});</script>

    <!-- Local script-->
    <script src="src/script.js"></script>

    <!-- Bootstrap scripts-->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
  </body>
</html>